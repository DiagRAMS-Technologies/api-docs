{"pageProps":{"entry":{"title":"Authentication","description":"Discover how to authenticate with our API","date":"2023-04-20T14:15:47.659Z","draft":false,"id":"authentication","content":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"API Auth guide","position":{"start":{"line":1,"column":3,"offset":2},"end":{"line":1,"column":17,"offset":16}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":17,"offset":16}}},{"type":"paragraph","children":[{"type":"text","value":"Welcome to the API Authentication Guide!","position":{"start":{"line":3,"column":1,"offset":18},"end":{"line":3,"column":41,"offset":58}}}],"position":{"start":{"line":3,"column":1,"offset":18},"end":{"line":3,"column":41,"offset":58}}},{"type":"paragraph","children":[{"type":"text","value":"We're excited to have you on board and help you get started with sending data to our API.","position":{"start":{"line":5,"column":1,"offset":60},"end":{"line":5,"column":90,"offset":149}}}],"position":{"start":{"line":5,"column":1,"offset":60},"end":{"line":5,"column":90,"offset":149}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"First task!","position":{"start":{"line":7,"column":4,"offset":154},"end":{"line":7,"column":15,"offset":165}}}],"position":{"start":{"line":7,"column":1,"offset":151},"end":{"line":7,"column":15,"offset":165}}},{"type":"paragraph","children":[{"type":"text","value":"To start sending us data, you will need the following information, ","position":{"start":{"line":9,"column":1,"offset":167},"end":{"line":9,"column":68,"offset":234}}},{"type":"link","title":null,"url":"mailto:support@diagrams-technologies.com?subject=Application%20credentials%20request","children":[{"type":"text","value":"please contact us","position":{"start":{"line":9,"column":69,"offset":235},"end":{"line":9,"column":86,"offset":252}}}],"position":{"start":{"line":9,"column":68,"offset":234},"end":{"line":9,"column":173,"offset":339}}},{"type":"text","value":" if you didn't get them:","position":{"start":{"line":9,"column":173,"offset":339},"end":{"line":9,"column":197,"offset":363}}}],"position":{"start":{"line":9,"column":1,"offset":167},"end":{"line":9,"column":197,"offset":363}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ML_PROJECT","position":{"start":{"line":11,"column":3,"offset":367},"end":{"line":11,"column":15,"offset":379}}},{"type":"text","value":": the code of the anomaly detection project we created for you,","position":{"start":{"line":11,"column":15,"offset":379},"end":{"line":11,"column":78,"offset":442}}}],"position":{"start":{"line":11,"column":3,"offset":367},"end":{"line":11,"column":78,"offset":442}}}],"position":{"start":{"line":11,"column":1,"offset":365},"end":{"line":11,"column":78,"offset":442}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ORGANISATION_ID","position":{"start":{"line":12,"column":3,"offset":445},"end":{"line":12,"column":20,"offset":462}}},{"type":"text","value":": the organisation id of your company in our systems,","position":{"start":{"line":12,"column":20,"offset":462},"end":{"line":12,"column":73,"offset":515}}}],"position":{"start":{"line":12,"column":3,"offset":445},"end":{"line":12,"column":73,"offset":515}}}],"position":{"start":{"line":12,"column":1,"offset":443},"end":{"line":12,"column":73,"offset":515}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"APPLICATION_ID","position":{"start":{"line":13,"column":3,"offset":518},"end":{"line":13,"column":19,"offset":534}}},{"type":"text","value":": the id of the application we created for you,","position":{"start":{"line":13,"column":19,"offset":534},"end":{"line":13,"column":66,"offset":581}}}],"position":{"start":{"line":13,"column":3,"offset":518},"end":{"line":13,"column":66,"offset":581}}}],"position":{"start":{"line":13,"column":1,"offset":516},"end":{"line":13,"column":66,"offset":581}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"APPLICATION_SECRET","position":{"start":{"line":14,"column":3,"offset":584},"end":{"line":14,"column":23,"offset":604}}},{"type":"text","value":": a unique string to keep secret that authenticates you.","position":{"start":{"line":14,"column":23,"offset":604},"end":{"line":14,"column":79,"offset":660}}}],"position":{"start":{"line":14,"column":3,"offset":584},"end":{"line":14,"column":79,"offset":660}}}],"position":{"start":{"line":14,"column":1,"offset":582},"end":{"line":14,"column":79,"offset":660}}}],"position":{"start":{"line":11,"column":1,"offset":365},"end":{"line":14,"column":79,"offset":660}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Generate token","position":{"start":{"line":16,"column":4,"offset":665},"end":{"line":16,"column":18,"offset":679}}}],"position":{"start":{"line":16,"column":1,"offset":662},"end":{"line":16,"column":18,"offset":679}}},{"type":"paragraph","children":[{"type":"text","value":"You can now generate a token with this request:","position":{"start":{"line":18,"column":1,"offset":681},"end":{"line":18,"column":48,"offset":728}}}],"position":{"start":{"line":18,"column":1,"offset":681},"end":{"line":18,"column":48,"offset":728}}},{"type":"code","lang":"sh","meta":null,"value":"curl -X POST 'https://api.diagrams-technologies.com/v0/oauth2/token' \\\n-u\"APPLICATION_ID:APPLICATION_SECRET\" \\\n-H'Content-Type: application/x-www-form-urlencoded' \\\n--data-binary 'grant_type=client_credentials'","position":{"start":{"line":20,"column":1,"offset":730},"end":{"line":25,"column":4,"offset":950}}},{"type":"paragraph","children":[{"type":"text","value":"And here's the result of the request.","position":{"start":{"line":27,"column":1,"offset":952},"end":{"line":27,"column":38,"offset":989}}}],"position":{"start":{"line":27,"column":1,"offset":952},"end":{"line":27,"column":38,"offset":989}}},{"type":"code","lang":"json","meta":null,"value":"{\n  \"access_token\": \"xxx.yyy.zzz\",\n  \"token_type\": \"bearer\",\n  \"expires_in\": 172800,\n  \"expiration_date\": \"2021-10-27T12:06:28.828Z\",\n  \"refresh_token\": \"xxxyyyzzzz==\",\n  \"refresh_token_expires_in\": 31557600,\n  \"refresh_token_expiration_date\": \"2022-10-25T18:06:28.849Z\"\n}","position":{"start":{"line":29,"column":1,"offset":991},"end":{"line":39,"column":4,"offset":1275}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Validity token","position":{"start":{"line":41,"column":4,"offset":1280},"end":{"line":41,"column":18,"offset":1294}}}],"position":{"start":{"line":41,"column":1,"offset":1277},"end":{"line":41,"column":18,"offset":1294}}},{"type":"paragraph","children":[{"type":"text","value":"The token is only valid for a certain duration (which can change depending on the load), after which it will have to be renewed by creating a new token or by renewing the previous one thanks to the ","position":{"start":{"line":43,"column":1,"offset":1296},"end":{"line":43,"column":199,"offset":1494}}},{"type":"inlineCode","value":"refresh_token","position":{"start":{"line":43,"column":199,"offset":1494},"end":{"line":43,"column":214,"offset":1509}}},{"type":"text","value":" associated with it:","position":{"start":{"line":43,"column":214,"offset":1509},"end":{"line":43,"column":234,"offset":1529}}}],"position":{"start":{"line":43,"column":1,"offset":1296},"end":{"line":43,"column":234,"offset":1529}}},{"type":"code","lang":"sh","meta":null,"value":"curl -X POST 'https://api.diagrams-technologies.com/v0/oauth2/token' \\\n-H'Content-Type: application/x-www-form-urlencoded' \\\n--data-binary 'grant_type=refresh_token&scope=data&refresh_token=refresh_token_encoded' \\","position":{"start":{"line":45,"column":1,"offset":1531},"end":{"line":49,"column":4,"offset":1755}}},{"type":"paragraph","children":[{"type":"text","value":"For renewal, several possible strategies:","position":{"start":{"line":51,"column":1,"offset":1757},"end":{"line":51,"column":42,"offset":1798}}}],"position":{"start":{"line":51,"column":1,"offset":1757},"end":{"line":51,"column":42,"offset":1798}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep the value of the ","position":{"start":{"line":53,"column":3,"offset":1802},"end":{"line":53,"column":25,"offset":1824}}},{"type":"inlineCode","value":"expires_in","position":{"start":{"line":53,"column":25,"offset":1824},"end":{"line":53,"column":37,"offset":1836}}},{"type":"text","value":" field of the token and check it before sending,","position":{"start":{"line":53,"column":37,"offset":1836},"end":{"line":53,"column":85,"offset":1884}}}],"position":{"start":{"line":53,"column":3,"offset":1802},"end":{"line":53,"column":85,"offset":1884}}}],"position":{"start":{"line":53,"column":1,"offset":1800},"end":{"line":53,"column":85,"offset":1884}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Wait until you encounter a 401 error to renew it and retry the call,","position":{"start":{"line":54,"column":3,"offset":1887},"end":{"line":54,"column":71,"offset":1955}}}],"position":{"start":{"line":54,"column":3,"offset":1887},"end":{"line":54,"column":71,"offset":1955}}}],"position":{"start":{"line":54,"column":1,"offset":1885},"end":{"line":54,"column":71,"offset":1955}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Decode the JWT token to extract its expiration date before the call.","position":{"start":{"line":55,"column":3,"offset":1958},"end":{"line":55,"column":71,"offset":2026}}}],"position":{"start":{"line":55,"column":3,"offset":1958},"end":{"line":55,"column":71,"offset":2026}}}],"position":{"start":{"line":55,"column":1,"offset":1956},"end":{"line":55,"column":71,"offset":2026}}}],"position":{"start":{"line":53,"column":1,"offset":1800},"end":{"line":55,"column":71,"offset":2026}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":56,"column":1,"offset":2027}}}}},"__N_SSG":true}