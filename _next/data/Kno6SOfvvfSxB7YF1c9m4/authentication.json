{"pageProps":{"entry":{"title":"Authentification","description":"Discover how to authenticate with our API","date":"2023-04-20T14:15:47.659Z","draft":false,"id":"authentification","content":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"API Auth guide","position":{"start":{"line":1,"column":3,"offset":2},"end":{"line":1,"column":17,"offset":16}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":17,"offset":16}}},{"type":"paragraph","children":[{"type":"text","value":"Welcome to the API Authentication Guide!","position":{"start":{"line":3,"column":1,"offset":18},"end":{"line":3,"column":41,"offset":58}}}],"position":{"start":{"line":3,"column":1,"offset":18},"end":{"line":3,"column":41,"offset":58}}},{"type":"paragraph","children":[{"type":"text","value":"We're excited to have you onboard and help you get started with sending data to our API.","position":{"start":{"line":5,"column":1,"offset":60},"end":{"line":5,"column":89,"offset":148}}}],"position":{"start":{"line":5,"column":1,"offset":60},"end":{"line":5,"column":89,"offset":148}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"First task !","position":{"start":{"line":7,"column":4,"offset":153},"end":{"line":7,"column":16,"offset":165}}}],"position":{"start":{"line":7,"column":1,"offset":150},"end":{"line":7,"column":16,"offset":165}}},{"type":"paragraph","children":[{"type":"text","value":"To start sending us data, you will need:","position":{"start":{"line":9,"column":1,"offset":167},"end":{"line":9,"column":41,"offset":207}}}],"position":{"start":{"line":9,"column":1,"offset":167},"end":{"line":9,"column":41,"offset":207}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ML_PROJECT","position":{"start":{"line":11,"column":3,"offset":221},"end":{"line":11,"column":15,"offset":233}}}],"position":{"start":{"line":11,"column":3,"offset":221},"end":{"line":11,"column":15,"offset":233}}}],"position":{"start":{"line":11,"column":1,"offset":219},"end":{"line":11,"column":15,"offset":233}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ORGANISATION_ID","position":{"start":{"line":12,"column":3,"offset":236},"end":{"line":12,"column":20,"offset":253}}}],"position":{"start":{"line":12,"column":3,"offset":236},"end":{"line":12,"column":20,"offset":253}}}],"position":{"start":{"line":12,"column":1,"offset":234},"end":{"line":12,"column":20,"offset":253}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"APPLICATION_ID","position":{"start":{"line":13,"column":3,"offset":256},"end":{"line":13,"column":19,"offset":272}}}],"position":{"start":{"line":13,"column":3,"offset":256},"end":{"line":13,"column":19,"offset":272}}}],"position":{"start":{"line":13,"column":1,"offset":254},"end":{"line":13,"column":19,"offset":272}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"APPLICATION_SECRET","position":{"start":{"line":14,"column":3,"offset":275},"end":{"line":14,"column":23,"offset":295}}}],"position":{"start":{"line":14,"column":3,"offset":275},"end":{"line":14,"column":23,"offset":295}}}],"position":{"start":{"line":14,"column":1,"offset":273},"end":{"line":14,"column":23,"offset":295}}}],"position":{"start":{"line":11,"column":1,"offset":219},"end":{"line":14,"column":23,"offset":295}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Generate token","position":{"start":{"line":16,"column":4,"offset":300},"end":{"line":16,"column":18,"offset":314}}}],"position":{"start":{"line":16,"column":1,"offset":297},"end":{"line":16,"column":18,"offset":314}}},{"type":"paragraph","children":[{"type":"text","value":"You can now generate token with request:","position":{"start":{"line":18,"column":1,"offset":316},"end":{"line":18,"column":41,"offset":356}}}],"position":{"start":{"line":18,"column":1,"offset":316},"end":{"line":18,"column":41,"offset":356}}},{"type":"code","lang":"bash","meta":null,"value":"curl -X POST \n'https://api.diagrams-technologies.com/v0/oauth2token' \n-u\"APPLICATION_ID:APPLICATION_SECRET\" \n-H'Content-Type: application/x-www-form-urlencoded' --data-binary 'grant_type=client_credentials'","position":{"start":{"line":20,"column":1,"offset":368},"end":{"line":25,"column":4,"offset":587}}},{"type":"paragraph","children":[{"type":"text","value":"And it's the result of the request.","position":{"start":{"line":27,"column":1,"offset":599},"end":{"line":27,"column":36,"offset":634}}}],"position":{"start":{"line":27,"column":1,"offset":599},"end":{"line":27,"column":36,"offset":634}}},{"type":"code","lang":"json","meta":null,"value":"{\n    \"access_token\": \"xxx.yyy.zzz\",\n    \"token_type\": \"bearer\",\n    \"expires_in\": 172800,\n    \"expiration_date\": \"2021-10-27T12:06:28.828Z\",\n    \"refresh_token\": \"xxxyyyzzzz==\",\n    \"refresh_token_expires_in\": 31557600,\n    \"refresh_token_expiration_date\": \"2022-10-25T18:06:28.849Z\"\n}","position":{"start":{"line":29,"column":1,"offset":646},"end":{"line":39,"column":4,"offset":945}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Validity token","position":{"start":{"line":41,"column":4,"offset":950},"end":{"line":41,"column":18,"offset":964}}}],"position":{"start":{"line":41,"column":1,"offset":947},"end":{"line":41,"column":18,"offset":964}}},{"type":"paragraph","children":[{"type":"text","value":"The token is only valid for a certain duration (which can change depending on the load), after which it will have to be renewed by creating a new token or by renewing the previous one thanks to the refresh_token associated with it:","position":{"start":{"line":43,"column":1,"offset":966},"end":{"line":43,"column":232,"offset":1197}}}],"position":{"start":{"line":43,"column":1,"offset":966},"end":{"line":43,"column":232,"offset":1197}}},{"type":"code","lang":"bash","meta":null,"value":"curl -X POST 'https://api.diagrams-technologies.com/v0/oauth2/token' \n-H'Content-Type: application/x-www-form-urlencoded' --data-binary 'grant_type=refresh_token&scope=data&refresh_token=refresh_token_encoded' \n-u\"APPLICATION_ID:APPLICATION_SECRET\"","position":{"start":{"line":45,"column":1,"offset":1209},"end":{"line":49,"column":4,"offset":1470}}},{"type":"paragraph","children":[{"type":"text","value":"For renewal, several possible strategies:","position":{"start":{"line":51,"column":1,"offset":1482},"end":{"line":51,"column":42,"offset":1523}}}],"position":{"start":{"line":51,"column":1,"offset":1482},"end":{"line":51,"column":42,"offset":1523}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep the value of the expires_in field of the token and check it before sending,","position":{"start":{"line":53,"column":3,"offset":1537},"end":{"line":53,"column":83,"offset":1617}}}],"position":{"start":{"line":53,"column":3,"offset":1537},"end":{"line":53,"column":83,"offset":1617}}}],"position":{"start":{"line":53,"column":1,"offset":1535},"end":{"line":53,"column":83,"offset":1617}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Wait to encounter a 401 error to renew it and retry the call,","position":{"start":{"line":54,"column":3,"offset":1620},"end":{"line":54,"column":64,"offset":1681}}}],"position":{"start":{"line":54,"column":3,"offset":1620},"end":{"line":54,"column":64,"offset":1681}}}],"position":{"start":{"line":54,"column":1,"offset":1618},"end":{"line":54,"column":64,"offset":1681}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Decode the JWT token to extract its expiration date before the call.","position":{"start":{"line":55,"column":3,"offset":1684},"end":{"line":55,"column":71,"offset":1752}}}],"position":{"start":{"line":55,"column":3,"offset":1684},"end":{"line":55,"column":71,"offset":1752}}}],"position":{"start":{"line":55,"column":1,"offset":1682},"end":{"line":55,"column":71,"offset":1752}}}],"position":{"start":{"line":53,"column":1,"offset":1535},"end":{"line":55,"column":71,"offset":1752}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":56,"column":1,"offset":1753}}}}},"__N_SSG":true}