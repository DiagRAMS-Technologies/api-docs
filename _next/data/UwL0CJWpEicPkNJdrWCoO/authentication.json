{"pageProps":{"entry":{"title":"Authentification","description":"Discover how to authenticate with our API","date":"2023-04-20T14:15:47.659Z","draft":false,"id":"authentification","content":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"API Auth guide","position":{"start":{"line":1,"column":3,"offset":2},"end":{"line":1,"column":17,"offset":16}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":17,"offset":16}}},{"type":"paragraph","children":[{"type":"text","value":"A text of welcome !","position":{"start":{"line":3,"column":1,"offset":18},"end":{"line":3,"column":20,"offset":37}}}],"position":{"start":{"line":3,"column":1,"offset":18},"end":{"line":3,"column":20,"offset":37}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"First task !","position":{"start":{"line":5,"column":4,"offset":42},"end":{"line":5,"column":16,"offset":54}}}],"position":{"start":{"line":5,"column":1,"offset":39},"end":{"line":5,"column":16,"offset":54}}},{"type":"paragraph","children":[{"type":"text","value":"To start sending us data, you will need :","position":{"start":{"line":7,"column":1,"offset":56},"end":{"line":7,"column":42,"offset":97}}}],"position":{"start":{"line":7,"column":1,"offset":56},"end":{"line":7,"column":42,"offset":97}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ML_PROJECT","position":{"start":{"line":9,"column":3,"offset":111},"end":{"line":9,"column":15,"offset":123}}}],"position":{"start":{"line":9,"column":3,"offset":111},"end":{"line":9,"column":15,"offset":123}}}],"position":{"start":{"line":9,"column":1,"offset":109},"end":{"line":9,"column":15,"offset":123}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ORGANISATION_ID","position":{"start":{"line":10,"column":3,"offset":126},"end":{"line":10,"column":20,"offset":143}}}],"position":{"start":{"line":10,"column":3,"offset":126},"end":{"line":10,"column":20,"offset":143}}}],"position":{"start":{"line":10,"column":1,"offset":124},"end":{"line":10,"column":20,"offset":143}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"APPLICATION_ID","position":{"start":{"line":11,"column":3,"offset":146},"end":{"line":11,"column":19,"offset":162}}}],"position":{"start":{"line":11,"column":3,"offset":146},"end":{"line":11,"column":19,"offset":162}}}],"position":{"start":{"line":11,"column":1,"offset":144},"end":{"line":11,"column":19,"offset":162}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"APPLICATION_SECRET","position":{"start":{"line":12,"column":3,"offset":165},"end":{"line":12,"column":23,"offset":185}}}],"position":{"start":{"line":12,"column":3,"offset":165},"end":{"line":12,"column":23,"offset":185}}}],"position":{"start":{"line":12,"column":1,"offset":163},"end":{"line":12,"column":23,"offset":185}}}],"position":{"start":{"line":9,"column":1,"offset":109},"end":{"line":12,"column":23,"offset":185}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Generate token","position":{"start":{"line":14,"column":4,"offset":190},"end":{"line":14,"column":18,"offset":204}}}],"position":{"start":{"line":14,"column":1,"offset":187},"end":{"line":14,"column":18,"offset":204}}},{"type":"paragraph","children":[{"type":"text","value":"You can now generate token with request :","position":{"start":{"line":16,"column":1,"offset":206},"end":{"line":16,"column":42,"offset":247}}}],"position":{"start":{"line":16,"column":1,"offset":206},"end":{"line":16,"column":42,"offset":247}}},{"type":"code","lang":"bash","meta":null,"value":"curl -X POST \n'https://api.diagrams-technologies.com/v0/oauth2token' \n-u\"APPLICATION_ID:APPLICATION_SECRET\" \n-H'Content-Type: application/x-www-form-urlencoded' --data-binary 'grant_type=client_credentials'","position":{"start":{"line":18,"column":1,"offset":259},"end":{"line":23,"column":4,"offset":478}}},{"type":"paragraph","children":[{"type":"text","value":"And it's the result of the request.","position":{"start":{"line":25,"column":1,"offset":490},"end":{"line":25,"column":36,"offset":525}}}],"position":{"start":{"line":25,"column":1,"offset":490},"end":{"line":25,"column":36,"offset":525}}},{"type":"code","lang":"json","meta":null,"value":"{\n    \"access_token\": \"xxx.yyy.zzz\",\n    \"token_type\": \"bearer\",\n    \"expires_in\": 172800,\n    \"expiration_date\": \"2021-10-27T12:06:28.828Z\",\n    \"refresh_token\": \"xxxyyyzzzz==\",\n    \"refresh_token_expires_in\": 31557600,\n    \"refresh_token_expiration_date\": \"2022-10-25T18:06:28.849Z\"\n}","position":{"start":{"line":27,"column":1,"offset":537},"end":{"line":37,"column":4,"offset":836}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Validity token","position":{"start":{"line":39,"column":4,"offset":841},"end":{"line":39,"column":18,"offset":855}}}],"position":{"start":{"line":39,"column":1,"offset":838},"end":{"line":39,"column":18,"offset":855}}},{"type":"paragraph","children":[{"type":"text","value":"The token is only valid for a certain duration (which can change depending on the load), after which it will have to be renewed by creating a new token or by renewing the previous one thanks to the refresh_token associated with it:","position":{"start":{"line":41,"column":1,"offset":857},"end":{"line":41,"column":232,"offset":1088}}}],"position":{"start":{"line":41,"column":1,"offset":857},"end":{"line":41,"column":232,"offset":1088}}},{"type":"code","lang":"bash","meta":null,"value":"curl -X POST 'https://api.diagrams-technologies.com/v0/oauth2/token' \n-H'Content-Type: application/x-www-form-urlencoded' --data-binary 'grant_type=refresh_token&scope=data&refresh_token=refresh_token_encoded' \n-u\"APPLICATION_ID:APPLICATION_SECRET\"","position":{"start":{"line":43,"column":1,"offset":1100},"end":{"line":47,"column":4,"offset":1361}}},{"type":"paragraph","children":[{"type":"text","value":"For renewal, several possible strategies:","position":{"start":{"line":49,"column":1,"offset":1373},"end":{"line":49,"column":42,"offset":1414}}}],"position":{"start":{"line":49,"column":1,"offset":1373},"end":{"line":49,"column":42,"offset":1414}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep the value of the expires_in field of the token and check it before sending.","position":{"start":{"line":51,"column":3,"offset":1428},"end":{"line":51,"column":83,"offset":1508}}}],"position":{"start":{"line":51,"column":3,"offset":1428},"end":{"line":51,"column":83,"offset":1508}}}],"position":{"start":{"line":51,"column":1,"offset":1426},"end":{"line":51,"column":83,"offset":1508}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Wait to encounter a 401 error to renew it and retry the call.","position":{"start":{"line":52,"column":3,"offset":1511},"end":{"line":52,"column":64,"offset":1572}}}],"position":{"start":{"line":52,"column":3,"offset":1511},"end":{"line":52,"column":64,"offset":1572}}}],"position":{"start":{"line":52,"column":1,"offset":1509},"end":{"line":52,"column":64,"offset":1572}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Decode the JWT token to extract its expiration date before the call.","position":{"start":{"line":53,"column":3,"offset":1575},"end":{"line":53,"column":71,"offset":1643}}}],"position":{"start":{"line":53,"column":3,"offset":1575},"end":{"line":53,"column":71,"offset":1643}}}],"position":{"start":{"line":53,"column":1,"offset":1573},"end":{"line":53,"column":71,"offset":1643}}}],"position":{"start":{"line":51,"column":1,"offset":1426},"end":{"line":53,"column":71,"offset":1643}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":54,"column":1,"offset":1644}}}}},"__N_SSG":true}